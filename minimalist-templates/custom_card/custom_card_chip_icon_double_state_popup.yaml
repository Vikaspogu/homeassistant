---
### Chip Icon Double State ###
custom_card_chip_icon_double_state_popup:
  template: 
    - "chips"
    - "custom_popup_card"
  triggers_update: "all"
  show_icon: true
  icon: "[[[ return variables.ulm_custom_card_chip_icon_double_state_icon ]]]"
  label: |
    [[[
      var state1 = "";
      if (states[variables.ulm_custom_card_chip_icon_double_state_entity_1].state){
        if (states[variables.ulm_custom_card_chip_icon_double_state_entity_1].attributes.preset_mode == "eco"){
          var state1 = states[variables.ulm_custom_card_chip_icon_double_state_entity_1].attributes.preset_mode;
        } else {
          var state1 = states[variables.ulm_custom_card_chip_icon_double_state_entity_1].state;
        }
      }
      var state2 = "";
      if (states[variables.ulm_custom_card_chip_icon_double_state_entity_2].state){
        var state2 = states[variables.ulm_custom_card_chip_icon_double_state_entity_2].state;
        if (states[variables.ulm_custom_card_chip_icon_double_state_entity_2].attributes.unit_of_measurement){
          state2 += states[variables.ulm_custom_card_chip_icon_double_state_entity_2].attributes.unit_of_measurement;
        }
      }
      return state1 + " â€¢ " + state2;
    ]]]
  styles:
    grid:
      - grid-template-areas: "'i l'"
    icon:
      - color: "[[[ return variables.ulm_custom_card_chip_icon_double_state_icon_color; ]]]"
    label:
      - color: "[[[ return variables.ulm_custom_card_chip_icon_double_state_label_color; ]]]"
custom_popup_card:
  tap_action:
    action: "fire-dom-event"
    browser_mod:
      service: "browser_mod.popup"
      data:
        large: true
        hide_header: true
        content:
          type: "vertical-stack"
          cards:
            - type: "custom:button-card"
              template: "popup_thermostat_temperature"
              entity: "[[[ return variables.ulm_custom_card_chip_popup_entity ]]]"
              variables:
                ulm_card_thermostat_preset_mode: false

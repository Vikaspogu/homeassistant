icon: mdi:home-assistant
title: Dashboard
path: dashboard
id: dash
cards:
  - type: "vertical-stack"
    cards:
    ## Status Chips ###################################################################################################################
    - type: custom:mushroom-chips-card
      card_mod:
        style: |
          ha-card {
            --chip-font-size: 14px;
          }
          .chip-container {
            flex-wrap: wrap;
            justify-content: flex-start;
          }
      alignment: start
      chips:
          ## Conditional Alert: Garage Door Open
          - type: conditional
            conditions:
              - condition: state
                entity: cover.garage_door_opener
                state_not: closed
            chip:
              type: template
              entity: cover.garage_door_opener
              tap_action:
                action: more-info
              content: "Optiq Garage Open!"
              icon: mdi:garage-alert
              icon_color: red
          - type: conditional
            conditions:
              - condition: state
                entity: cover.ratgdo32_7b2420_door
                state_not: closed
            chip:
              type: template
              entity: cover.ratgdo32_7b2420_door
              tap_action:
                action: more-info
              content: "VW Garage Open!"
              icon: mdi:garage-alert
              icon_color: red
          ## Conditional Alert: Door Open
          - type: conditional
            conditions:
              - condition: state
                entity: binary_sensor.sidedoor_yale_assure_2_lock_window_door_is_open
                state: "on"
            chip:
              type: template
              entity: binary_sensor.sidedoor_yale_assure_2_lock_window_door_is_open
              tap_action:
                action: more-info
              content: "Side Door Open!"
              icon: mdi:door-open
              icon_color: red
          ## Conditional Alert: Lock Unlocked
          - type: conditional
            conditions:
              - condition: state
                entity: lock.sidedoor_yale_assure_2_lock
                state: unlocked
            chip:
              type: template
              entity: lock.sidedoor_yale_assure_2_lock
              tap_action:
                action: more-info
              content: "Door Unlocked!"
              icon: mdi:lock-open-alert
              icon_color: amber
          ## Lock Battery (always show, color changes based on level)
          - type: template
            entity: sensor.sidedoor_yale_assure_2_lock_battery_level
            tap_action:
              action: more-info
            content: |-
              Lock {{ states('sensor.sidedoor_yale_assure_2_lock_battery_level') }}%
            icon: |-
              {% set level = states('sensor.sidedoor_yale_assure_2_lock_battery_level') | float(0) %}
              {% if level >= 80 %}mdi:battery
              {% elif level >= 60 %}mdi:battery-60
              {% elif level >= 40 %}mdi:battery-40
              {% elif level >= 20 %}mdi:battery-20
              {% else %}mdi:battery-alert
              {% endif %}
            icon_color: |-
              {% set level = states('sensor.sidedoor_yale_assure_2_lock_battery_level') | float(0) %}
              {% if level >= 50 %}green
              {% elif level >= 20 %}amber
              {% else %}red
              {% endif %}
          ## System Status
          - type: template
            tap_action:
              action: more-info
            entity: sensor.uptime
            content: |-
              Uptime {{ states('sensor.uptime') | as_datetime | relative_time }}
            icon: mdi:server
            icon_color: purple
          - type: template
            entity: binary_sensor.pogu_nas_security_status
            tap_action:
              action: more-info
            content: |-
              {%- if is_state('binary_sensor.pogu_nas_security_status', 'on') %} 
                Unsafe
              {%- else %}
                Safe
              {% endif %}
            icon: |-
              {%- if is_state('binary_sensor.pogu_nas_security_status', 'on') %} 
                mdi:alert
              {%- else %}
                mdi:shield-check
              {% endif %}
            icon_color: |-
              {% if is_state('binary_sensor.pogu_nas_security_status', 'on') %}
                amber
              {% else %}
                green
              {% endif %}
          ## Vehicle Status
          - type: template
            tap_action:
              action: more-info
            entity: sensor.2025_cadillac_optiq_charge_state
            content: |-
              {{ states('sensor.2025_cadillac_optiq_charge_state') }}%
            icon: |-
              {% if states('sensor.2025_cadillac_optiq_charge_state') | float >= 80 %}
                mdi:battery-80
              {% elif states('sensor.2025_cadillac_optiq_charge_state') | float >= 60 %}
                mdi:battery-60
              {% elif states('sensor.2025_cadillac_optiq_charge_state') | float >= 40 %}
                mdi:battery-40
              {% else %}
                mdi:battery-alert
              {% endif %}
            icon_color: |-
              {% if states('sensor.2025_cadillac_optiq_charge_state') | float >= 50 %}
                green
              {% else %}
                amber
              {% endif %}
          - type: template
            tap_action:
              action: more-info
            entity: sensor.2025_cadillac_optiq_ev_range
            content: |-
              {{ states('sensor.2025_cadillac_optiq_ev_range') }}mi
            icon: mdi:ev-station
            icon_color: |-
              {% if states('sensor.2025_cadillac_optiq_ev_range') | float >= 50 %}
                green
              {% else %}
                amber
              {% endif %}
          - type: template
            entity: device_tracker.2025_cadillac_optiq
            icon: si:cadillac
            icon_color: "amber"
            content: |-
              {{ states('sensor.pogu_s_2025_cadillac_optiq_distance') }} mi
              â€¢ 
              {{ states('device_tracker.2025_cadillac_optiq') | regex_replace(find='_', replace=' ', ignorecase=False)}}
            tap_action:
              action: "fire-dom-event"
              browser_mod:
                service: browser_mod.popup
                data:
                  title: Optiq Location
                  style:
                    $: >
                      [[[
                        if (hass.themes.theme.includes("desktop")){
                          var dialog = `
                            .mdc-dialog__surface{
                              border-radius: var(--border-radius) !important;
                            }
                          `;
                        } else{
                          var dialog = "";
                        }
                        return `
                          *{
                            --secondary-background-color: none !important;
                            --font-family: var(--primary-font-family);
                          }
                          ${dialog}
                        `;
                      ]]]
                    hui-vertical-stack-card:
                      $: >
                        button-card {
                          align-self: center;
                          padding: 0.2em 0 2.3em 0;
                        }
                        hui-entities-card{
                          padding: 0.8em 1.4em;
                        }
                      $hui-entities-card$: >
                        ha-card{
                          box-shadow: none;
                        }
                      $hui-history-graph-card$: >
                        .content {
                          padding: 0 2.4em !important;
                        }
                        ha-card{
                          box-shadow: none;
                        }
                      $hui-glance-card$: >
                        ha-card{
                          box-shadow: none;
                        }
                      $hui-map-card:
                        $: >
                          ha-icon-button {
                            color: rgba(var(--color-blue),1);
                          }
                        $ha-map:
                          $: >
                            .leaflet-control-attribution {
                              display: none;
                            }
                            .leaflet-touch .leaflet-control-layers, .leaflet-touch .leaflet-bar {
                              border: 2px solid rgba(var(--color-blue),0.4) !important;
                            }
                            .leaflet-bar a {
                              background-color: rgba(var(--color-blue),0.2) !important;
                              color: rgba(var(--color-blue),1) !important;
                            }
                            .leaflet-bar a:first-child {
                              border-bottom: 2px solid rgba(var(--color-blue),0.4) !important;
                            }
                            .leaflet-pane.leaflet-tile-pane {
                              filter: contrast(95%);
                            }
                  content:
                    type: "vertical-stack"
                    cards:
                      - type: "entities"
                        card_mod:
                          style: |
                            :host {
                              font-family: var(--primary-font-family);
                            }
                        entities:
                          - entity: "device_tracker.2025_cadillac_optiq"
                            secondary_info: "last-changed"
                      - type: "map"
                        card_mod:
                          style: |
                            :host {
                              font-family: var(--primary-font-family);
                            }
                        aspect_ratio: "12x10"
                        default_zoom: 16
                        entities: 
                          - "device_tracker.2025_cadillac_optiq"
    - type: "custom:button-card"
      template: card_weather
      entity: weather.forecast_home
      variables:
        ulm_card_weather_name: " "
        ulm_card_weather_primary_info:
          - wind_speed
          - precipitation_probability
        ulm_card_weather_backdrop:
          fade: true
        ulm_card_weather_custom:
          - temp: sensor.outside_temperature

    - type: "custom:button-card"
      template: "card_scenes_welcome"
      variables:
        entity_1:
          entity_id: "input_boolean.run_wakeup_script"
          icon: "mdi:white-balance-sunny"
          name: "Morning"
          color: "yellow"
        entity_2:
          entity_id: "input_boolean.run_goodnight_script"
          icon: "mdi:weather-night"
          name: "Night"
          color: "blue"
        entity_3:
          entity_id: "input_boolean.on_vacation"
          icon: "mdi:beach"
          name: "Vacation"
          color: "green"
        entity_4:
          entity_id: "input_boolean.override_temperature_control"
          icon: "mdi:thermostat"
          name: "Thermostat"
          color: "red"
        entity_5:
          entity_id: "input_boolean.working"
          icon: "mdi:laptop-account"
          name: "Working"
          color: "purple"

    - type: horizontal-stack
      cards:
      - type: 'custom:button-card'
        template: card_person
        entity: person.vikas_pogu
        variables:
          ulm_card_person_entity: person.vikas_pogu
          ulm_card_person_use_entity_picture: true
          ulm_card_person_icon: mdi:face-man
        name: Vikas
      - type: 'custom:button-card'
        template: card_person
        entity: person.spogu
        variables:
          ulm_card_person_entity: person.spogu
          ulm_card_person_use_entity_picture: true
          ulm_card_person_icon: mdi:face-woman

    ## Quick Actions #############################################################################
    - type: grid
      columns: 3
      square: false
      cards:
        - type: 'custom:button-card'
          icon: mdi:lightbulb-group-off
          name: All Lights Off
          color: grey
          styles:
            card:
              - background: "rgba(var(--color-theme),0.05)"
              - padding: "12px"
              - border-radius: "var(--border-radius)"
            icon:
              - color: "rgba(var(--color-red),1)"
              - width: "24px"
            name:
              - font-size: "12px"
              - color: "rgba(var(--color-theme),0.9)"
          tap_action:
            action: perform-action
            perform_action: light.turn_off
            target:
              entity_id: all
        - type: 'custom:button-card'
          icon: mdi:home-lock
          name: Lock All
          styles:
            card:
              - background: "rgba(var(--color-theme),0.05)"
              - padding: "12px"
              - border-radius: "var(--border-radius)"
            icon:
              - color: "rgba(var(--color-green),1)"
              - width: "24px"
            name:
              - font-size: "12px"
              - color: "rgba(var(--color-theme),0.9)"
          tap_action:
            action: perform-action
            perform_action: lock.lock
            target:
              entity_id: lock.sidedoor_yale_assure_2_lock
        - type: 'custom:button-card'
          icon: mdi:garage
          name: Close Garages
          styles:
            card:
              - background: "rgba(var(--color-theme),0.05)"
              - padding: "12px"
              - border-radius: "var(--border-radius)"
            icon:
              - color: "rgba(var(--color-blue),1)"
              - width: "24px"
            name:
              - font-size: "12px"
              - color: "rgba(var(--color-theme),0.9)"
          tap_action:
            action: perform-action
            perform_action: cover.close_cover
            target:
              entity_id:
                - cover.garage_door_opener
                - cover.ratgdo32_7b2420_door

    ## Access Control #############################################################################
    - type: 'custom:button-card'
      template: card_title
      name: Access Control
      card_mod:
        class: ulm-title
    - type: horizontal-stack
      cards:
        - type: "custom:button-card"
          template: card_cover
          entity: cover.garage_door_opener
          variables:
            ulm_card_cover_name: Optiq Garage
            ulm_card_cover_enable_controls: true
            ulm_card_cover_color: "green"
        - type: "custom:button-card"
          template: card_cover
          entity: cover.ratgdo32_7b2420_door
          variables:
            ulm_card_cover_name: VW Garage
            ulm_card_cover_enable_controls: true
            ulm_card_cover_color: "green"
    - type: "custom:button-card"
      entity: lock.sidedoor_yale_assure_2_lock
      template: "custom_card_eraycetinay_lock"
      name: "Side Door"
      variables:
        ulm_custom_card_eraycetinay_lock_tap_control: true
        ulm_custom_card_eraycetinay_lock_battery_level: sensor.sidedoor_yale_assure_2_lock_battery_level
        ulm_custom_card_eraycetinay_lock_door_open: binary_sensor.sidedoor_yale_assure_2_lock_window_door_is_open
      triggers_update:
        - "sensor.sidedoor_yale_assure_2_lock_battery_level"
        - "binary_sensor.sidedoor_yale_assure_2_lock_window_door_is_open"

    ## Climate Control #############################################################################
    - type: 'custom:button-card'
      template: card_title
      name: Climate
      card_mod:
        class: ulm-title
    - type: "custom:button-card"
      template: card_thermostat
      entity: climate.thermostat
      variables:
        ulm_card_thermostat_enable_collapse: true
        ulm_card_thermostat_enable_controls: true
        ulm_card_thermostat_enable_hvac_modes: true
        ulm_card_thermostat_enable_popup: true
    ## Temperature Graphs - 2 per row for mobile compatibility
    - type: grid
      columns: 2
      square: false
      cards:
        - type: "custom:button-card"
          template: card_graph
          entity: sensor.outside_temperature
          variables:
            ulm_card_graph_color: "var(--google-green)"
            ulm_card_graph_name: Outside
            ulm_card_graph_entity: sensor.outside_temperature
            ulm_card_graph_type: fill
            ulm_card_graph_hours: 24
            ulm_card_graph_group_by: interval
            ulm_card_graph_line_width: 6
        - type: "custom:button-card"
          template: card_graph
          entity: sensor.bedroom_temperature_temperature
          variables:
            ulm_card_graph_color: "var(--google-blue)"
            ulm_card_graph_name: Master Bedroom
            ulm_card_graph_entity: sensor.bedroom_temperature_temperature
            ulm_card_graph_type: fill
            ulm_card_graph_hours: 24
            ulm_card_graph_group_by: interval
            ulm_card_graph_line_width: 6
        - type: "custom:button-card"
          template: card_graph
          entity: sensor.callies_room_temperature_temperature
          variables:
            ulm_card_graph_color: "var(--google-red)"
            ulm_card_graph_name: Callie's Room
            ulm_card_graph_entity: sensor.callies_room_temperature_temperature
            ulm_card_graph_type: fill
            ulm_card_graph_hours: 24
            ulm_card_graph_group_by: interval
            ulm_card_graph_line_width: 6

    ## Camera ###################################################################################################################   
    - type: 'custom:button-card'
      template: card_title
      name: Cameras
      card_mod:
        class: ulm-title
    - type: horizontal-stack
      cards:
      - type: 'custom:frigate-card'
        cameras:
        - camera_entity: camera.g4_doorbell_pro_medium_resolution_channel
        - camera_entity: camera.g5_bullet_medium_resolution_channel
        - camera_entity: camera.g4_instant_medium_resolution_channel

    ## Vacuum ###################################################################################################################  
    - type: 'custom:button-card'
      template: card_title
      name: Vacuums
      card_mod:
        class: ulm-title
    - type: grid
      columns: 2
      square: false
      cards:
        - type: custom:mushroom-vacuum-card
          entity: vacuum.valetudo_wall_e
          name: Wall-E
          icon_animation: true
          commands:
            - start_pause
            - stop
            - locate
            - return_home
        - type: custom:mushroom-vacuum-card
          entity: vacuum.e_vac
          name: E-Vac
          icon_animation: true
          commands:
            - start_pause
            - stop
            - locate
            - return_home
    - type: 'custom:button-card'
      template: card_title
      name: Wall-E Map
      card_mod:
        class: ulm-title
    - vacuum: valetudo_wall_e
      type: custom:valetudo-map-card
      title: Cleaning Map

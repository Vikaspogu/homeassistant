icon: si:cadillac
title: Optiq
path: optiq
id: optiq
cards:
  - type: "vertical-stack"
    cards:
    - type: custom:vehicle-status-card
      entity: binary_sensor.2025_cadillac_optiq_ev_plug_state
      name: Cadillac Optiq
      button_card:
        - button:
            primary: Get Location
            secondary:
              - entity: ""
                attribute: ""
                state_template: ""
            icon: mdi:car-wireless
            notify: ""
          button_type: action
          hide_button: false
          card_type: default
          default_card: []
          custom_card: []
          button_action:
            entity: button.2025_cadillac_optiq_super_cruise_command_getlocation
            tap_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.2025_cadillac_optiq_super_cruise_command_getlocation
            hold_action:
              action: none
            double_tap_action:
              action: none
        - button:
            icon: mdi:power
            primary: Start
            secondary:
              entity: ""
              attribute: ""
              state_template: ""
          button_type: action
          hide_button: false
          card_type: default
          default_card: []
          custom_card: []
          button_action:
            entity: button.2025_cadillac_optiq_super_cruise_command_start
            tap_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.2025_cadillac_optiq_super_cruise_command_start
            hold_action:
              action: none
            double_tap_action:
              action: none
        - button:
            primary: Lock Doors
            secondary:
              - entity: ""
                attribute: ""
                state_template: ""
            icon: mdi:car-door-lock
            notify: ""
          button_type: action
          hide_button: false
          card_type: default
          default_card: []
          custom_card: []
          button_action:
            entity: button.2025_cadillac_optiq_super_cruise_command_lockdoor
            tap_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.2025_cadillac_optiq_super_cruise_command_lockdoor
            hold_action:
              action: none
            double_tap_action:
              action: none
        - button:
            icon: mdi:car-door-lock-open
            primary: Unlock Doors
            secondary:
              entity: ""
              attribute: ""
              state_template: ""
          button_type: action
          hide_button: false
          card_type: default
          default_card: []
          custom_card: []
          button_action:
            entity: button.2025_cadillac_optiq_super_cruise_command_unlockdoor
            tap_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.2025_cadillac_optiq_super_cruise_command_unlockdoor
            hold_action:
              action: none
            double_tap_action:
              action: none
        - button:
            icon: mdi:lock
            primary: Lock Trunk
            secondary:
              entity: ""
              attribute: ""
              state_template: ""
          button_type: action
          hide_button: false
          card_type: default
          default_card: []
          custom_card: []
          button_action:
            entity: button.2025_cadillac_optiq_super_cruise_command_locktrunk
            tap_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.2025_cadillac_optiq_super_cruise_command_locktrunk
            hold_action:
              action: none
            double_tap_action:
              action: none
        - button:
            icon: mdi:lock-open
            primary: Unlock Trunk
            secondary:
              entity: ""
              attribute: ""
              state_template: ""
          button_type: action
          hide_button: false
          card_type: default
          default_card: []
          custom_card: []
          button_action:
            entity: button.2025_cadillac_optiq_super_cruise_command_unlocktrunk
            tap_action:
              action: perform-action
              perform_action: button.press
              target:
                entity_id: button.2025_cadillac_optiq_super_cruise_command_unlocktrunk
            hold_action:
              action: none
            double_tap_action:
              action: none
      images:
        - url: /local/images/other/optiq.png
      indicators:
        single:
          - entity: sensor.2025_cadillac_optiq_odometer_mi
            icon: mdi:counter
            action_config:
              tap_action:
                action: more-info
          - entity: sensor.2025_cadillac_optiq_ev_range_mi
            icon: mdi:map-marker-distance
            action_config:
              tap_action:
                action: more-info
        group:
          - name: Tires
            items:
              - entity: sensor.2025_cadillac_optiq_tire_pressure_left_front
                name: Front left
              - entity: sensor.2025_cadillac_optiq_tire_pressure_right_front
                name: Front right
              - entity: sensor.2025_cadillac_optiq_tire_pressure_left_rear
                name: Rear left
              - entity: sensor.2025_cadillac_optiq_tire_pressure_right_rear
                name: Rear right
            icon: mdi:car-tire-alert

      range_info:
        - energy_level:
            entity: sensor.2025_cadillac_optiq_ev_battery_level
            icon: mdi:battery
            tap_action:
              action: more-info
            value_position: inside
          range_level:
            entity: sensor.2025_cadillac_optiq_ev_range_mi
            value_position: inside
          charging_entity: binary_sensor.2025_cadillac_optiq_ev_charge_state
          progress_color: "#2196f3"
          bar_height: 16
          bar_radius: 8
      layout_config:
        range_info_config:
          layout: row
        button_grid:
          rows: 3
          columns: 2
          swipe: true
          button_layout: horizontal
          transparent: false
        hide:
          button_notify: false
          buttons: false
          images: false
          indicators: false
          range_info: false
          mini_map: true
          card_name: false
          map_address: true
        section_order:
          - header_info
          - images
          - indicators
          - range_info
          - buttons

    ## Location ###################################################################################################################
    - type: 'custom:button-card'
      template: card_title
      title: Location
    - type: map
      dark_mode: true
      aspect_ratio: 16:9
      auto_fit: true
      entities:
        - device_tracker.2025_cadillac_optiq

    ## Car glance stats ###################################################################################################################
    - type: horizontal-stack
      cards:
        - type: gauge
          entity: sensor.2025_cadillac_optiq_ev_range
          min: 0
          max: 420
          name: Range
          severity:
            green: 250
            yellow: 150
            red: 75
    - type: entities
      title: Mileage
      entities:
        - entity: sensor.2025_cadillac_optiq_lifetime_energy_used
      state_color: true
      footer:
        type: "custom:mini-graph-card"
        entities:
          - entity: sensor.2025_cadillac_optiq_odo_read_mi
          - entity: sensor.2025_cadillac_optiq_lifetime_energy_used
            y_axis: secondary
            show_state: true
        hours_to_show: 672
        group_by: date
        decimals: 0
        show:
          graph: bar
          name: false
          icon: false
    - type: entities
      entities:
        - entity: binary_sensor.2025_cadillac_optiq_ev_plug_state
          secondary_info: last-changed
        - entity: binary_sensor.2025_cadillac_optiq_ev_charge_state
          secondary_info: last-changed
        - entity: sensor.2025_cadillac_optiq_charge_voltage
      title: Charging
      state_color: true
        
    ## Auto entities Optiq - Grouped by Category ###################################################################################################################
    ## Battery & Range
    - type: 'custom:button-card'
      template: card_title
      name: Battery & Range
      card_mod:
        class: ulm-title
    - type: "custom:auto-entities"
      show_empty: false
      unique: true
      card:
        type: "grid"
        columns: 1
        square: false
      card_param: "cards"
      sort:
        method: friendly_name
      filter:
        include:
          - entity_id: "sensor.2025_cadillac_optiq_ev_battery*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
          - entity_id: "sensor.2025_cadillac_optiq_ev_range*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
          - entity_id: "sensor.2025_cadillac_optiq_charge*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
        exclude:
          - state: "unavailable"
          - state: "unknown"

    ## Tire Pressure
    - type: 'custom:button-card'
      template: card_title
      name: Tire Pressure
      card_mod:
        class: ulm-title
    - type: "custom:auto-entities"
      show_empty: false
      unique: true
      card:
        type: "grid"
        columns: 1
        square: false
      card_param: "cards"
      sort:
        method: friendly_name
      filter:
        include:
          - entity_id: "sensor.2025_cadillac_optiq_tire*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
        exclude:
          - state: "unavailable"
          - state: "unknown"

    ## Odometer & Distance
    - type: 'custom:button-card'
      template: card_title
      name: Odometer & Distance
      card_mod:
        class: ulm-title
    - type: "custom:auto-entities"
      show_empty: false
      unique: true
      card:
        type: "grid"
        columns: 1
        square: false
      card_param: "cards"
      sort:
        method: friendly_name
      filter:
        include:
          - entity_id: "sensor.2025_cadillac_optiq_odo*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
          - entity_id: "sensor.2025_cadillac_optiq_*distance*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
        exclude:
          - state: "unavailable"
          - state: "unknown"

    ## Vehicle Status (Binary Sensors)
    - type: 'custom:button-card'
      template: card_title
      name: Vehicle Status
      card_mod:
        class: ulm-title
    - type: "custom:auto-entities"
      show_empty: false
      unique: true
      card:
        type: "grid"
        columns: 1
        square: false
      card_param: "cards"
      sort:
        method: state
        reverse: true
      filter:
        include:
          - entity_id: "binary_sensor.2025_cadillac_optiq_*"
            options:
              type: "custom:button-card"
              template: card_binary_sensor
              entity: this.entity_id
              variables:
                ulm_card_binary_sensor_show_last_changed: true
        exclude:
          - state: "unavailable"
          - state: "unknown"
          - entity_id: "*_color"
          - entity_id: "*_polling*"

    ## Other Sensors
    - type: 'custom:button-card'
      template: card_title
      name: Other Info
      card_mod:
        class: ulm-title
    - type: "custom:auto-entities"
      show_empty: false
      unique: true
      card:
        type: "grid"
        columns: 1
        square: false
      card_param: "cards"
      sort:
        method: friendly_name
      filter:
        include:
          - entity_id: "sensor.2025_cadillac_optiq_*"
            options:
              type: "custom:button-card"
              template: card_generic_swap
              entity: this.entity_id
        exclude:
          - state: "unavailable"
          - state: "unknown"
          - entity_id: "*_color"
          - entity_id: "*_status_color"
          - entity_id: "*_polling*"
          - entity_id: "*_command_*"
          - entity_id: "*_recalls"
          - entity_id: "*_sev_lvl"
          - entity_id: "*_mode_counter"
          - entity_id: "*_vin"
          - entity_id: "*_last_trip*"
          - entity_id: "*_lifetime*"
          - entity_id: "*hotspot*"
          - entity_id: "*ev_battery*"
          - entity_id: "*ev_range*"
          - entity_id: "*charge*"
          - entity_id: "*tire*"
          - entity_id: "*odo*"
          - entity_id: "*distance*"
    
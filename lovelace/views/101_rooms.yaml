icon: mdi:bed
title: Rooms
path: rooms
id: rooms
cards:
  - type: "vertical-stack"
    cards:
    - type: custom:mushroom-chips-card
      card_mod:
          style: |
            ha-card {
              --chip-font-size: 14px;
            }
      chips:
        - type: back
        - type: action
          icon: mdi:home
          tap_action:
            action: navigate
            navigation_path: /lovelace/dash
        - type: action
          icon_color: red
          icon: si:tesla
          tap_action:
            action: navigate
            navigation_path: /lovelace/tesla
        - type: action
          icon_color: green
          icon: mdi:nas
          tap_action:
            action: navigate
            navigation_path: /lovelace/nas
        - type: action
          icon_color: grey
          icon: mdi:cog
          tap_action:
            action: navigate
            navigation_path: /lovelace/system

    - type: custom:mushroom-title-card
      title: Menu
      subtitle: Select button below
    - type: horizontal-stack
      cards:
      - type: 'custom:button-card'
        template: card_vertical_button
        entity: input_select.room_mode
        name: Main
        icon: mdi:light-switch
        variables:
          ulm_card_vertical_button_state: Main
          ulm_card_vertical_button_color: green
      - type: 'custom:button-card'
        template: card_vertical_button
        entity: input_select.room_mode
        name: Temperature
        icon: mdi:thermometer
        variables:
          ulm_card_vertical_button_state: Temperature
          ulm_card_vertical_button_color: green
      - type: 'custom:button-card'
        template: card_vertical_button
        entity: input_select.room_mode
        name: Battery
        icon: mdi:battery
        variables:
          ulm_card_vertical_button_state: Battery
          ulm_card_vertical_button_color: green
      - type: 'custom:button-card'
        template: card_vertical_button
        entity: input_select.room_mode
        name: TV
        icon: mdi:remote-tv
        variables:
          ulm_card_vertical_button_state: TV
          ulm_card_vertical_button_color: green
    
    - type: horizontal-stack
      cards:
        - type: custom:state-switch
          entity: input_select.room_mode
          default: Main
          states:
            Main:
              type: "vertical-stack"
              cards:
                ## Lights ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: Lights
                - type: "custom:auto-entities"
                  card:
                    type: "grid"
                    columns: 2
                    square: false
                  card_param: "cards"
                  sort:
                    method: last-changed
                  filter:
                    include:
                      - domain: "light"
                        entity_id: "light.*_group"
                        options:
                          type: custom:mushroom-light-card
                          entity: "this.entity_id"
                          show_brightness_control: true
                          show_color_temp_control: true
                          show_color_control: true
                          use_light_color: true
                      - entity_id: "light.tv_h6199"
                        options:
                          type: custom:mushroom-light-card
                          entity: "this.entity_id"
                          show_brightness_control: true
                          show_color_temp_control: true
                          show_color_control: true
                          use_light_color: true
                          icon: mdi:led-strip-variant
                ## Curtains/Blinds #############################################################################
                - type: custom:mushroom-title-card
                  title: Covers
                - type: horizontal-stack
                  cards:
                    - type: "custom:auto-entities"
                      card:
                        type: "grid"
                        columns: 2
                        square: false
                      card_param: "cards"
                      sort:
                        method: last-changed
                      filter:
                        include:
                        - domain: cover
                          options:
                            type: custom:mushroom-cover-card
                            entity: this.entity_id
                            show_buttons_control: true
                            show_tilt_position_control: true

                ## Switches #############################################################################
                - type: custom:mushroom-title-card
                  title: Switches
                - type: horizontal-stack
                  cards:
                    - type: "custom:auto-entities"
                      card:
                        type: "grid"
                        columns: 2
                        square: false
                      card_param: "cards"
                      sort:
                        method: last-changed
                      filter:
                        include:
                          - domain: "switch"
                            options:
                              type: custom:mushroom-entity-card
                              entity: "this.entity_id"
                              secondary_info: last-changed
                              tap_action:
                                action: toggle
                        exclude:
                          - state: unavailable
                          - name: "*led"
            Temperature:
              type: "vertical-stack"
              cards:
                ## Temperature Sensor ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: Temperature
                - type: horizontal-stack
                  cards:
                    - type: "custom:auto-entities"
                      card:
                        type: "grid"
                        columns: 2
                        square: false
                      card_param: "cards"
                      sort:
                        method: last-changed
                      filter:
                        include:
                          - domain: "sensor"
                            entity_id: "sensor.*temperature"
                            options:
                              type: custom:stack-in-card
                              cards:
                                - type: custom:mushroom-template-card
                                  primary: '{{ state_attr(entity, ''friendly_name'') | regex_replace(find=''Temperature'', replace='''', ignorecase=False) }}'
                                  icon: mdi:thermometer
                                  tap_action:
                                    action: more-info
                                  icon_color: |-
                                    {% if is_state(entity, 'unknown') %}
                                        
                                    {% elif states(entity) | float >= 70 %}
                                      red
                                    {% elif states(entity) | float >= 50 %}
                                      green
                                    {% else %}
                                      blue
                                    {% endif %}
                                  entity: this.entity_id
                                - type: custom:mini-graph-card
                                  entities:
                                    - entity: this.entity_id
                                      state_adaptive_color: true
                                  font_size: 75
                                  font_size_header: 10
                                  show:
                                    icon: false
                                    name: false
                                    extrema: true
                                    name_adaptive_color: true
                                    icon_adaptive_color: true
                                  color_thresholds:
                                    - value: 0
                                      color: '#3B4EFF'
                                    - value: 50
                                      color: '#47a04b'
                                    - value: 70
                                      color: '#f44336'
                        exclude:
                          - state: unavailable
                          - entity_id: "*nas*"
                          - name: "*Motion*"
                          - name: "*Pixel*"

                ## illuminance Sensor ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: Illuminance
                - type: horizontal-stack
                  cards:
                    - type: "custom:auto-entities"
                      card:
                        type: "grid"
                        columns: 2
                        square: false
                      card_param: "cards"
                      sort:
                        method: last-changed
                      filter:
                        include:
                          - domain: "sensor"
                            entity_id: "sensor.*illuminance_lux"
                            options:
                              type: custom:stack-in-card
                              cards:
                                - type: custom:mushroom-template-card
                                  primary: '{{ state_attr(entity, ''friendly_name'') | regex_replace(find=''illuminance lux'', replace='''', ignorecase=False)}}'
                                  icon: mdi:weather-sunny
                                  tap_action:
                                    action: more-info
                                  icon_color: amber
                                  entity: this.entity_id
                                - type: custom:mini-graph-card
                                  entities:
                                    - entity: this.entity_id
                                      state_adaptive_color: true
                                  font_size: 75
                                  font_size_header: 10
                                  show:
                                    icon: false
                                    name: false
                                    extrema: true
                                    name_adaptive_color: true
                                    icon_adaptive_color: true
                                  color_thresholds:
                                    - value: 0
                                      color: '#FFD966'
                                    - value: 50
                                      color: '#4cd964'
                                    - value: 70
                                      color: '#007aff'
                        exclude:
                          - state: unavailable

                ## Humidity Sensor ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: Humidity
                - type: horizontal-stack
                  cards:
                    - type: "custom:auto-entities"
                      card:
                        type: "grid"
                        columns: 2
                        square: false
                      card_param: "cards"
                      sort:
                        method: last-changed
                      filter:
                        include:
                          - domain: "sensor"
                            entity_id: "sensor.*humidity*"
                            options:
                              type: custom:stack-in-card
                              cards:
                                - type: custom:mushroom-template-card
                                  primary: '{{ state_attr(entity, ''friendly_name'') | regex_replace(find=''Humidity'', replace='''', ignorecase=False)}}'
                                  icon: mdi:water-percent
                                  tap_action:
                                    action: more-info
                                  icon_color: |-
                                    {% if is_state(entity, 'unknown') %}
                                      disabled
                                    {% elif states(entity) | float >= 70 %}
                                      blue
                                    {% elif states(entity) | float >= 50 %}
                                      green
                                    {% else %}
                                      red
                                    {% endif %}
                                  entity: this.entity_id
                                - type: custom:mini-graph-card
                                  entities:
                                    - entity: this.entity_id
                                      state_adaptive_color: true
                                  font_size: 75
                                  font_size_header: 10
                                  show:
                                    icon: false
                                    name: false
                                    extrema: true
                                    name_adaptive_color: true
                                    icon_adaptive_color: true
                                  color_thresholds:
                                    - value: 0
                                      color: '#ff3b30'
                                    - value: 50
                                      color: '#4cd964'
                                    - value: 70
                                      color: '#007aff'

            Battery:
              type: "vertical-stack"
              cards:
                ## Battery ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: Battery
                - type: horizontal-stack
                  cards:
                  - type: "custom:auto-entities"
                    card:
                      type: "grid"
                      columns: 2
                      square: false
                    card_param: "cards"
                    sort:
                      method: last-changed
                    filter:
                      include:
                        - attributes:
                            unit_of_measurement: "%"
                            device_class: "battery"
                          options:
                            type: custom:mushroom-template-card
                            primary: '{{ state_attr(entity, ''friendly_name'') | regex_replace(find=''Battery'', replace='''', ignorecase=True) }}'
                            secondary: |-
                              {{ states(entity) }}
                            entity: this.entity_id
                            icon: mdi:battery
                            tap_action:
                              action: more-info
                            icon_color: >-
                              {% set value=states(entity)|int %}
                              {% if (value >= 75) %}
                                green
                              {% elif (value >= 65) %}
                                light-green
                              {% elif (value >= 55) %}
                                lime
                              {% elif (value >= 45) %}
                                yellow
                              {% elif (value >= 35) %}
                                amber
                              {% elif (value >= 25) %}
                                orange
                              {% elif (value >= 15) %}
                                deep-orange
                              {% else %}
                                red
                              {% endif %}
                      exclude:
                        - state: unavailable
                        - entity_id: "*tesla*"
                        - name: "*Pixel*"

                ## Motion ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: Motion
                - type: horizontal-stack
                  cards:
                  - type: "custom:auto-entities"
                    card:
                      type: "grid"
                      columns: 2
                      square: false
                    card_param: "cards"
                    sort:
                      method: last-changed
                    filter:
                      include:
                        - entity_id: "binary_sensor.*occupancy"
                          options:
                            type: custom:mushroom-entity-card
                            secondary_info: last-changed
                            entity: this.entity_id
                      exclude:
                        - state: unavailable

            TV:
              type: "vertical-stack"
              cards:
                ## LG TV ###################################################################################################################
                - type: custom:mushroom-title-card
                  title: TV Remote
                  subtitle: LG Bedroom
                - type: horizontal-stack
                  cards:
                    - type: custom:fold-entity-row
                      head:
                        type: section
                        label: TV
                        icon: 'si:lg'
                      open: true
                      clickable: true
                      entities:
                      - type: 'custom:lg-remote-control'
                        entity: media_player.lg_webos_smart_tv
                        mac: !secret lg_tv_mac
                        sources:
                        - icon: 'mdi:plex'
                          name: "Plex"
                        - icon: 'si:amazon'
                          name: "Amazon Prime Video"
                        - icon: 'mdi:hulu'
                          name: "Hulu"


# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Text to speech
tts:
  - platform: google_translate

group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
sensor: !include sensor.yaml
binary_sensor: !include binary_sensor.yaml
google_assistant: !include google_assistant_integ.yaml

frontend:
  themes: !include themes.yaml

http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 192.168.20.0/24

proximity:
  home_tesla:
    zone: home
    devices:
      - device_tracker.tesla_location
    tolerance: 10
    unit_of_measurement: mi

mqtt:
  broker: vernemq.default
  discovery: true

cover:
  - platform: mqtt
    name: "Garage Door"
    unique_id: "12345677"
    command_topic: "garage/set"
    state_topic: "zigbee2mqtt/GarageDoor"
    availability:
      - topic: "garage/availability"
    qos: 0
    retain: false
    payload_open: "OPEN"
    payload_close: "CLOSE"
    state_open: "open"
    state_opening: "opening"
    state_closed: "closed"
    state_closing: "closing"
    payload_available: "online"
    payload_not_available: "offline"
    value_template: >-
      {% if value_json.contact == true %}
        closed
      {% elif  value_json.contact == false %}
        open
      {% else %} 
        Unknown 
      {% endif %}

tplink:
  discovery: false
  switch:
    - host: 192.168.10.199
    - host: 192.168.10.198

ble_monitor:
  bt_interface: !secret ble_interface
  discovery: False
  active_scan: False
  report_unknown: False
  decimals: 1
  period: 60
  log_spikes: False
  use_median: False
  restore_state: False
  devices:
    # sensor
    - mac: !secret work_room_mac
      name: 'Work room'
      encryption_key: !secret work_room_encryption_key
      temperature_unit: F
      decimals: 2
    - mac: !secret living_room_mac
      name: 'Living room'
      encryption_key: !secret living_room_encryption_key
      temperature_unit: F
      decimals: 2
    - mac: !secret bed_room_mac
      name: 'Bed room'
      encryption_key: !secret bed_room_encryption_key
      temperature_unit: F
      decimals: 2

nest:
  client_id: !secret nest_client_id
  client_secret: !secret nest_client_secret
  project_id: !secret nest_project_id
  subscriber_id: !secret nest_sub

## LOVELACE UI ##########################################################################
# OLD ?
lovelace_gen:

lovelace:
  mode: yaml
  # Include external resources only add when mode is yaml
  resources:
    # Plugins
    - url: /local/custom-lovelace/bar-card/bar-card.js
      type: module
    - url: /local/custom-lovelace/button-card/button-card.js
      type: module
    - url: /local/custom-lovelace/lovelace-multiple-entity-row/multiple-entity-row.js
      type: module
    - url: /local/custom-lovelace/mini-graph-card-bundle/mini-graph-card-bundle.js
      type: module
    - url: /local/custom-lovelace/simple-thermostat/simple-thermostat.js
      type: module
    - url: /local/custom-lovelace/transmission/transmission-card.js
      type: module
    - url: /local/custom-lovelace/vacuum-card/vacuum-card.js
      type: module
    - url: /local/custom-lovelace/vertical-stack-in-card/vertical-stack-in-card.js
      type: module
    - url: /local/custom-lovelace/weather-card/weather-card.js
      type: module
    # Styles
    - url: "https://fonts.googleapis.com/css2?family=Raleway&display=swap"
      type: css
    - url: "https://fonts.googleapis.com/css2?family=Comfortaa&display=swap"
      type: css
  dashboards:
    lovelace-generated:
      mode: yaml
      filename: notexist.yaml
      title: Generated
      icon: mdi:rotate-right
      show_in_sidebar: true
      require_admin: true

# https://github.com/thomasloven/hass-browser_mod
browser_mod:
  disable:
    - all
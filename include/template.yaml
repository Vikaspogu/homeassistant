
####################################################
#                                                  #
#                     TEMPLATE                     #
#                                                  #
####################################################

template:
  sensor:
  - unique_id: uptime_minutes
    name: UpTime Minutes
    state: >
      {{ (as_timestamp(now()) - as_timestamp(states('sensor.uptime'))) // 60| round (0)  }}

  - name: "lights on"
    unique_id: lights_on
    icon: mdi:lightbulb-on-outline
    state: >
      {% set lights = [
          states.light.kitchen_lights_group,
          states.light.landing_lights_group,
          states.light.living_room_dining_group,
          states.light.office_ceiling_lights_group,
          ] %}
      {{ lights | selectattr('state','eq','on') | list | count }}

  - name: "covers open"
    unique_id: covers_open
    icon: mdi:window-shutter-open
    state: >
      {% set covers = [
          states.cover.bedroom_blinds,
          states.cover.bedroom_curtain,
          states.cover.curtain_living_room,
          states.cover.spare_bedroom_curtain,
          states.cover.garage_door,
          ] %}
      {{ covers | selectattr('state','eq','open') | list | count }}

  - unique_id: ble_temperature_bed_room
    icon: mdi:thermometer
    name : "Bed Room Temp F"
    state: >
      {% set t = states('sensor.ble_temperature_bed_room_2') | float(0) %}
      {{((t)*9/5)+32}}
    unit_of_measurement: "F"

  - unique_id: ble_temperature_work_room
    icon: mdi:thermometer
    name : "Work Room Temp F"
    state: >
      {% set t = states('sensor.ble_temperature_work_room_2') | float(0) %}
      {{((t)*9/5)+32}}
    unit_of_measurement: "F"

  - unique_id: ble_temperature_living_room
    icon: mdi:thermometer
    name : "Living Room Temp F"
    state: >
      {% set t = states('sensor.ble_temperature_living_room_2') | float(0) %}
      {{((t)*9/5)+32}}
    unit_of_measurement: "F"

  - unique_id: outside_temperature
    icon: mdi:thermometer
    name : "Outside Temperature"
    state: "{{ states.weather.home.attributes.temperature }}"
  
  - unique_id: presence_distance
    icon: mdi:map-marker-distance
    name : "Presence Distance"
    state: "{{ states.sensor.pixel_7_room_presence.attributes.distance }}"

  - unique_id: thermostat_current_temperature
    icon: mdi:thermometer
    name : "Thermostat current temperature"
    state: "{{ states.climate.living_room.attributes.current_temperature }}"

  - unique_id: thermostat_eco_mode
    icon: mdi:leaf
    name : "Thermostat eco mode"
    state: "{{ states.climate.living_room.attributes.preset_mode }}"

  - unique_id: thermostat_eco_state
    icon: mdi:leaf
    name : "Thermostat eco state"
    state: "{{ states.climate.living_room.attributes.preset_mode }}"

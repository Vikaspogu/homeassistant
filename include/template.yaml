
####################################################
#                                                  #
#                     TEMPLATE                     #
#                                                  #
####################################################

template:
  sensor:        
  - unique_id: updates
    state: template
    attributes:
      synology: >
        {% set installed = device_attr(device_id('sensor.pogu_nas_status'), 'sw_version').split(' ')[1] %}
        {% set latest = states('sensor.synology_dsm_latest') %}
        {% if is_state('binary_sensor.pogu_nas_update_available', 'on') %}
          <b>Synology DSM</b> {{ installed + ' \u279e ' + latest }}
        {% endif %}
  - unique_id: nas_status
    icon: custom:synology-nas
    state: >
      {% set entity_id = 'sensor.pogu_nas_status' %}
      {% if is_state(entity_id, 'normal') %}
        Good
      {% elif is_state(entity_id, 'background') %}
        Verifies
      {% else %}
        {{ states(entity_id) }}
      {% endif %}
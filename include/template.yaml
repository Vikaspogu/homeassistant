####################################################
#                                                  #
#                     TEMPLATE                     #
#                                                  #
####################################################

template:
  sensor:
    - name: Server Energy Price
      unique_id: server_energy_price
      icon: mdi:currency-usd
      device_class: monetary
      unit_of_measurement: "USD"
      state: >
        {% set serverplug_1 = states('sensor.serverplug_1_energy') | float(0) %}
        {% set serverplug_2 = states('sensor.serverplug_2_energy') | float(0) %}
        {{ ((serverplug_1 + serverplug_2) * 0.13) | round(2) }}

    - name: UpTime Minutes
      unique_id: uptime_minutes
      icon: mdi:timer-outline
      unit_of_measurement: "min"
      state: >
        {{ ((as_timestamp(now()) - as_timestamp(states('sensor.uptime'))) // 60) | int(0) }}

    - name: Outside Temperature
      unique_id: outside_temperature
      icon: mdi:thermometer
      device_class: temperature
      unit_of_measurement: "°F"
      state: "{{ state_attr('weather.forecast_home', 'temperature') | float(0) }}"

    - name: Thermostat Desired Temperature
      unique_id: thermostat_desired_temperature
      icon: mdi:thermometer
      device_class: temperature
      unit_of_measurement: "°F"
      state: "{{ state_attr('climate.thermostat', 'temperature') | float(0) }}"

    - name: Living Room Temperature
      unique_id: living_room_temperature
      icon: mdi:thermometer
      device_class: temperature
      unit_of_measurement: "°F"
      state: "{{ state_attr('climate.thermostat', 'current_temperature') | float(0) }}"

    - name: Thermostat Eco Mode
      unique_id: thermostat_eco_mode
      icon: mdi:leaf
      state: "{{ state_attr('climate.thermostat', 'preset_mode') | default('unknown') }}"
